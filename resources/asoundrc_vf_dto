#
# Set up the playback hardware, rate is filled in by the setup script.
#
pcm.playback_hw {
    type hw
    card "Device"
    device 0
    format S32_LE
    channels 2
    rate {{rate}}
}

#
# Set up the capture hardware, rate is filled in by the setup script.
#
pcm.capture_hw {
    type hw
    card "Device"
    device 1
    format S32_LE
    channels 2
    rate {{rate}}
}

#
# Playback device
# plug - rate and format conversion
# softvol - control for alsamixer
# dmix - allow device to be shared
#
pcm.XMOS_I2S_Playback {
    type plug
    slave.pcm {
        type softvol
        slave.pcm {
            type dmix
            ipc_key 256
            ipc_perm 0666
            slave.pcm "playback_hw"
        }
        control {
            name "Playback Volume"
            card "Device"
        }
    }
}

#
# Capture device
#
pcm.XMOS_I2S_Capture {
    type plug
    slave.pcm {
        type softvol
        slave.pcm {
            type dsnoop
            ipc_key 512
            ipc_perm 0666
            slave.pcm "capture_hw"
        }
        control {
            name "Capture Volume"
            card "Device"
        }
    }
}

pcm.!default {
    type asym
    playback.pcm "XMOS_I2S_Playback"
    capture.pcm "XMOS_I2S_Capture"
}

#
# Aliases for compatibility
#

pcm.playback {
    type plug
    slave.pcm "XMOS_I2S_Playback"
}

pcm.capture {
    type plug
    slave.pcm "XMOS_I2S_Capture"
}
